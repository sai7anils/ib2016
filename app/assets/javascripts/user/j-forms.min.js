$(document).ready(function() {

    $("#phone").mask("(+99) 99999-99999", {
        placeholder: "x"
    }), $("#post").mask("999-9999", {
        placeholder: "x"
    }), $("#j-forms").validate({
        errorClass: "error-view",
        validClass: "success-view",
        errorElement: "span",
        onkeyup: !1,
        onclick: !1,
        rules: {
            first_name: {
                required: !0
            },
            last_name: {
                required: !0
            },
            email: {
                required: !0,
                email: !0
            },
            gender: {
                required: !0
            },
            dob: {
                required: !0
            },
            town: {
                required: !0
            },
            phone: {
                required: !0
            },
            country: {
                required: !0
            },
            city: {
                required: !0
            },
            prof: {
                required: !0
            },
            company: {
                required: !0
            },
            skills: {
                required: !0
            },
            exp: {
                required: !0
            },
            grad: {
                required: !0
            },
            univ: {
                required: !0
            },
            web: {
                required: !0
            },
            post: {
                required: !0
            },
            address: {
                required: !0
            },
            message: {
                required: !0
            },
            quote: {
                required: !0
            },
            position: {
                required: !0
            },
            file1: {
                required: !0,
                extension: "doc|docx|xls|xlsx"
            },
            file2: {
                required: !0,
                extension: "doc|docx|xls|xlsx"
            }

        },
        messages: {
            first_name: {
                required: "Please enter your first name"
            },
            last_name: {
                required: "Please enter your last name"
            },
            email: {
                required: "Please enter your email",
                email: "Incorrect email format"
            }

            ,
            phone: {
                required: "Please enter your phone"
            },
            country: {
                required: "Please select a country"
            },
            gender: {
                required: "Please Select a gender"
            },
            dob: {
                required: "Please Select your Date Of Birth"
            },
            town: {
                required: "Please Enter your town"
            },
            city: {
                required: "Please enter a city"
            },
            prof: {
                required: "Please enter a Profession"
            },
            company: {
                required: "Please enter a Company"
            },
            skills: {
                required: "Please enter a skills"
            },
            exp: {
                required: "Please Select a Experience"
            },
            grad: {
                required: "Please Select a graduation"
            },
            univ: {
                required: "Please enter a univercity"
            },
            web: {
                required: "Please enter a website"
            },
            post: {
                required: "Please enter a post code"
            },
            address: {
                required: "Please enter your address"
            },
            message: {
                required: "Please enter About yourself"
            },
            quote: {
                required: "Please enter quote"
            },
            position: {
                required: "Please select desired position"
            },
            file1: {
                required: "Please upload some file",
                extension: "Incorrect file format"
            },
            file2: {
                required: "Please upload some file",
                extension: "Incorrect file format"
            }

        },
        highlight: function(e, s, t) {
            $(e).closest(".input").removeClass(t).addClass(s), ($(e).is(":checkbox") || $(e).is(":radio")) && $(e).closest(".check").removeClass(t).addClass(s)
        },
        gender: {
            required: "Please select gender"
        },
        unhighlight: function(e, s, t) {
            $(e).closest(".input").removeClass(s).addClass(t), ($(e).is(":checkbox") || $(e).is(":radio")) && $(e).closest(".check").removeClass(s).addClass(t)
        },
        errorPlacement: function(e, s) {
            $(s).is(":checkbox") || $(s).is(":radio") ? $(s).closest(".check").append(e) : $(s).closest(".unit").append(e)
        },
        submitHandler: function() {
            $('.btn-next').attr('type', 'button');
            var currentTab = $('.nav-tabs > .active').find('a').attr('href');
            var maxTab = "#tab" + ($('ul.tabsec > li').size() - 1);
            var lastTab = "#tab" + ($('ul.tabsec > li').size());
            setTimeout(function(){
                if (currentTab == maxTab){
                  $('.btn-submit').removeClass('hide');
                  $('.btn-next').addClass('hide');
                }else if (currentTab == lastTab){
                  $("#j-forms").ajaxSubmit({
                    target: "#j-forms #response",
                    error: function(e) {
                        location.reload();
                    },
                    beforeSubmit: function() {
                        $('#j-forms button[type="submit"]').attr("disabled", !0).addClass("processing")
                    },
                    success: function() {
                        window.location.reload();
                    }
                    });
                }
                $('.btn-next').attr('type', 'submit');
                $('.nav-tabs > .active').next('li').find('a').trigger('click');

            }, 500);
            return false;
            /*$("#j-forms").ajaxSubmit({
                target: "#j-forms #response",
                error: function(e) {
                    location.reload();
                    //$("#j-forms #response").html("An error occured: " + e.status + " - " + e.statusText)
                },
                beforeSubmit: function() {
                    $('#j-forms button[type="submit"]').attr("disabled", !0).addClass("processing")
                },
                success: function() {
                    location.reload();
                    /*$('#j-forms button[type="submit"]').attr("disabled", !1).removeClass("processing"), $("#j-forms .input").removeClass("success-view error-view"), $("#j-forms .check").removeClass("success-view error-view"), $("#j-forms .success-message").length && ($("#j-forms").resetForm(), $('#j-forms button[type="submit"]').attr("disabled", !0), $("#j-forms .multi-prev-btn").attr("disabled", !0), setTimeout(function() {
                        $("#j-forms #response").removeClass("success-message").html(""), $('#j-forms button[type="submit"]').attr("disabled", !1), $("#j-forms .multi-prev-btn").attr("disabled", !1), $("#j-forms .multi-prev-btn").css("display", "none"), $("#j-forms .multi-submit-btn").css("display", "none"), $("#j-forms fieldset").removeClass("active-fieldset"), $("#j-forms fieldset").eq(0).addClass("active-fieldset"), $("#j-forms .multi-next-btn").css("display", "block")
                    }, 5e3))*/
               // }

            //})
        }

    }), $("form.j-multistep").length && $("form.j-multistep").each(function() {
        var e = $(this).attr("id"),
            s = $("#" + e + " fieldset").length,
            t = $("#" + e + " .step").length,
            i = $("#" + e + " .multi-next-btn"),
            r = $("#" + e + " .multi-prev-btn"),
            a = $("#" + e + " .multi-submit-btn");
        $("#" + e + " fieldset").eq(0).addClass("active-fieldset"), t && $("#" + e + " .step").eq(0).addClass("active-step"), $("#" + e + " fieldset").eq(0).hasClass("active-fieldset") && (a.css("display", "none"), r.css("display", "none")), i.on("click", function() {
            return 1 != $("#" + e).valid() ? !1 : ($("#" + e + " fieldset.active-fieldset").removeClass("active-fieldset").next("fieldset").addClass("active-fieldset"), t && $("#" + e + " .step.active-step").removeClass("active-step").addClass("passed-step").next(".step").addClass("active-step"), r.css("display", "block"), $("#" + e + " fieldset").eq(s - 1).hasClass("active-fieldset") && (a.css("display", "block"), i.css("display", "none")), void 0)
        }), r.on("click", function() {
            $("#" + e + " fieldset.active-fieldset").removeClass("active-fieldset").prev("fieldset").addClass("active-fieldset"), t && $("#" + e + " .step.active-step").removeClass("active-step").prev(".step").removeClass("passed-step").addClass("active-step"), $("#" + e + " fieldset").eq(0).hasClass("active-fieldset") && r.css("display", "none"), $("#" + e + " fieldset").eq(s - 2).hasClass("active-fieldset") && (a.css("display", "none"), i.css("display", "block"))
        })
    })
});

